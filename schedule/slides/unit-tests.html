<!DOCTYPE html>
<html lang="en-CA"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.552">

  <meta name="author" content="Daniel J. McDonald">
  <title>UBC Stat550</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="tachyons-minimal.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="section" class="slide level2 large" data-background-image="img/consult.jpeg" data-background-opacity="0.3">
<h2>Unit tests and avoiding ü™≤ü™≤</h2>
<p><span class="secondary">Stat 550</span></p>
<p><span class="secondary">Daniel J. McDonald</span></p>
<p>Last modified ‚Äì 06 February 2024</p>
<p><span class="math display">\[
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\minimize}{minimize}
\DeclareMathOperator*{\maximize}{maximize}
\DeclareMathOperator*{\find}{find}
\DeclareMathOperator{\st}{subject\,\,to}
\newcommand{\E}{E}
\newcommand{\Expect}[1]{\E\left[ #1 \right]}
\newcommand{\Var}[1]{\mathrm{Var}\left[ #1 \right]}
\newcommand{\Cov}[2]{\mathrm{Cov}\left[#1,\ #2\right]}
\newcommand{\given}{\mid}
\newcommand{\X}{\mathbf{X}}
\newcommand{\x}{\mathbf{x}}
\newcommand{\y}{\mathbf{y}}
\newcommand{\P}{\mathcal{P}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\snorm}[1]{\lVert #1 \rVert}
\newcommand{\tr}[1]{\mbox{tr}(#1)}
\newcommand{\U}{\mathbf{U}}
\newcommand{\D}{\mathbf{D}}
\newcommand{\V}{\mathbf{V}}
\]</span></p>
</section>
<section id="i-urge-you-to-consult" class="slide level2">
<h2>I urge you to consult:</h2>
<p><a href="https://36-750.github.io">Carnegie Mellon‚Äôs 36-750 Notes</a></p>
<p>Thank you Alex and Chris for the heavy lifting.</p>
</section>
<section id="bugs-happen.-all.-the.-time." class="slide level2">
<h2>Bugs happen. All. The. Time.</h2>
<ul>
<li><p>the crash of the <a href="https://en.wikipedia.org/wiki/Mars%5FClimate%5FOrbiter">Mars Climate Orbiter</a> (1998),</p></li>
<li><p>a <a href="https://telephoneworld.org/landline-telephone-history/the-crash-of-the-att-network-in-1990/">failure of the national telephone network</a> (1990),</p></li>
<li><p>a deadly medical device (<a href="https://en.wikipedia.org/wiki/Therac-25">1985</a>, 2000),</p></li>
<li><p>a massive <a href="https://en.wikipedia.org/wiki/Northeast%5Fblackout%5Fof%5F2003">Northeastern blackout</a> (2003),</p></li>
<li><p>the <a href="http://heartbleed.com/">Heartbleed</a>, <a href="https://www.dwheeler.com/essays/apple-goto-fail.html">Goto Fail</a>, <a href="https://en.wikipedia.org/wiki/Shellshock%5F(software%5Fbug)">Shellshock</a> exploits (2012‚Äì2014),</p></li>
<li><p>a 15-year-old <a href="http://www.pnas.org/content/113/28/7900.full">fMRI analysis software</a> bug that inflated significance levels (2015),</p></li>
</ul>
<div class="fragment">
<p>It is easy to write lots of code.</p>
<p>But are we sure it‚Äôs doing the right things?</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Effective testing tries to help.</p>
</div>
</div>
</div>
</div>
</section>
<section id="a-common-interactive-workflow" class="slide level2">
<h2>A Common (Interactive) Workflow</h2>
<ol type="1">
<li>Write a function.</li>
<li>Try some reasonable values at the REPL to check that it works.</li>
<li>If there are problems, maybe insert some print statements, and modify the function.</li>
<li>Repeat until things seem fine.</li>
</ol>
<p>(REPL == Read-Eval-Print-Loop, the console, or Jupyter NB)</p>
<ul>
<li><p>This tends to result in lots of bugs.</p></li>
<li><p>Later on, you forget which values you tried, whether they failed, how you fixed them.</p></li>
<li><p>So you make a change and maybe or maybe not try some again.</p></li>
</ul>
</section>
<section id="step-1-write-functions" class="slide level2">
<h2>Step 1 ‚Äî write functions</h2>
<div class="callout callout-important callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Write functions.</p>
<p>Lots of them.</p>
</div>
</div>
</div>
<p>üëç Functions are testable</p>
<p>üëé Scripts are not</p>
<p>It‚Äôs easy to alter the arguments and see ‚Äúwhat happens‚Äù</p>
<p>There‚Äôs less ability to screw up environments.</p>
<div class="fragment">
<p>I‚Äôm going to mainly describe <code>R</code>, but the logic is very similar (if not the syntax) for <code>python</code>, <code>C++</code>, and <code>Julia</code></p>
</div>
</section>
<section id="understanding-signatures" class="slide level2">
<h2>Understanding signatures</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">sig</span>(lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fn &lt;- function(formula, data, subset, weights, na.action, method = "qr", model
  = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, contrasts =
  NULL, offset, ...)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">sig</span>(<span class="st">`</span><span class="at">+</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fn &lt;- function(e1, e2)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">sig</span>(dplyr<span class="sc">::</span>filter)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fn &lt;- function(.data, ..., .by = NULL, .preserve = FALSE)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">sig</span>(stats<span class="sc">::</span>filter)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fn &lt;- function(x, filter, method = c("convolution", "recursive"), sides = 2,
  circular = FALSE, init = NULL)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">sig</span>(rnorm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fn &lt;- function(n, mean = 0, sd = 1)</code></pre>
</div>
</div>
</section>
<section id="these-are-all-the-same" class="slide level2">
<h2>These are all the same</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb11-2"><a></a><span class="fu">rnorm</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.5855288  0.7094660 -0.1093033</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb13-2"><a></a><span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">mean =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.5855288  0.7094660 -0.1093033</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb15-2"><a></a><span class="fu">rnorm</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.5855288  0.7094660 -0.1093033</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb17-2"><a></a><span class="fu">rnorm</span>(<span class="at">sd =</span> <span class="dv">1</span>, <span class="at">n =</span> <span class="dv">3</span>, <span class="at">mean =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.5855288  0.7094660 -0.1093033</code></pre>
</div>
</div>
<ul>
<li>Functions can have default values.</li>
<li>You may, but don‚Äôt have to, name the arguments</li>
<li>If you name them, you can pass them out of order (but you shouldn‚Äôt).</li>
</ul>
</section>
<section id="outputs-vs.-side-effects" class="slide level2">
<h2>Outputs vs.&nbsp;Side effects</h2>
<div class="flex">
<div class="w-50">
<ul>
<li>Side effects are things a function does, outputs can be assigned to variables</li>
<li>A good example is the <code>hist</code> function</li>
<li>You have probably only seen the side effect which is to plot the histogram</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>my_histogram <span class="ot">&lt;-</span> <span class="fu">hist</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="unit-tests_files/figure-revealjs/unnamed-chunk-4-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div class="w-50">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">str</span>(my_histogram)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ breaks  : num [1:14] -3 -2.5 -2 -1.5 -1 -0.5 0 0.5 1 1.5 ...
 $ counts  : int [1:13] 4 21 41 83 138 191 191 182 74 43 ...
 $ density : num [1:13] 0.008 0.042 0.082 0.166 0.276 0.382 0.382 0.364 0.148 0.086 ...
 $ mids    : num [1:13] -2.75 -2.25 -1.75 -1.25 -0.75 -0.25 0.25 0.75 1.25 1.75 ...
 $ xname   : chr "rnorm(1000)"
 $ equidist: logi TRUE
 - attr(*, "class")= chr "histogram"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">class</span>(my_histogram)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "histogram"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="step-2-program-defensively-ensure-behaviour" class="slide level2">
<h2>Step 2 ‚Äî program defensively, ensure behaviour</h2>
<div class="flex">
<div class="w-50">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb24-2"><a></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb24-3"><a></a>}</span>
<span id="cb24-4"><a></a>  </span>
<span id="cb24-5"><a></a><span class="fu">incrementer</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">incrementer</span>(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in x + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb30-2"><a></a>  <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb30-3"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb30-4"><a></a>}</span>
<span id="cb30-5"><a></a><span class="fu">incrementer</span>(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in incrementer("a"): is.numeric(x) is not TRUE</code></pre>
</div>
</div>
</div>
<div class="w-50">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb32-2"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) {</span>
<span id="cb32-3"><a></a>    <span class="fu">stop</span>(<span class="st">"`x` must be numeric"</span>)</span>
<span id="cb32-4"><a></a>  }</span>
<span id="cb32-5"><a></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb32-6"><a></a>}</span>
<span id="cb32-7"><a></a><span class="fu">incrementer</span>(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in incrementer("a"): `x` must be numeric</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">incrementer</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>) <span class="do">## oops!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb36-2"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) {</span>
<span id="cb36-3"><a></a>    <span class="fu">stop</span>(<span class="st">"`x` must be numeric"</span>)</span>
<span id="cb36-4"><a></a>  }</span>
<span id="cb36-5"><a></a>  x <span class="sc">+</span> inc_by</span>
<span id="cb36-6"><a></a>}</span>
<span id="cb36-7"><a></a><span class="fu">incrementer</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="even-better" class="slide level2">
<h2>Even better</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb38-2"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"`x` must be numeric"</span>)</span>
<span id="cb38-3"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(inc_by)) cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"`inc_by` must be numeric"</span>)</span>
<span id="cb38-4"><a></a>  x <span class="sc">+</span> inc_by</span>
<span id="cb38-5"><a></a>}</span>
<span id="cb38-6"><a></a><span class="fu">incrementer</span>(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `incrementer()`:
! `x` must be numeric</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `incrementer()`:
! `inc_by` must be numeric</code></pre>
</div>
</div>
</section>
<section id="step-3-keep-track-of-behaviour-with-tests" class="slide level2">
<h2>Step 3 ‚Äî Keep track of behaviour with tests</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="fu">library</span>(testthat)</span>
<span id="cb42-2"><a></a>incrementer <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">inc_by =</span> <span class="dv">1</span>) {</span>
<span id="cb42-3"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) <span class="fu">stop</span>(<span class="st">"`x` must be numeric"</span>)</span>
<span id="cb42-4"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(inc_by)) <span class="fu">stop</span>(<span class="st">"`inc_by` must be numeric"</span>)</span>
<span id="cb42-5"><a></a>  x <span class="sc">+</span> inc_by</span>
<span id="cb42-6"><a></a>}</span>
<span id="cb42-7"><a></a><span class="fu">test_that</span>(<span class="st">"incrementer validates arguments"</span>, {</span>
<span id="cb42-8"><a></a>  <span class="fu">expect_error</span>(<span class="fu">incrementer</span>(<span class="st">"a"</span>))</span>
<span id="cb42-9"><a></a>  <span class="fu">expect_equal</span>(<span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb42-10"><a></a>  <span class="fu">expect_equal</span>(<span class="fu">incrementer</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>), <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb42-11"><a></a>  <span class="fu">expect_error</span>(<span class="fu">incrementer</span>(<span class="dv">1</span>, <span class="st">"b"</span>))</span>
<span id="cb42-12"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb42-13"><a></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>‚îÄ‚îÄ Failure: incrementer validates arguments ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
incrementer(1:3) not identical to 2:4.
Objects equal but not identical</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error:
! Test failed</code></pre>
</div>
</div>
</section>
<section id="integers-are-trouble" class="slide level2">
<h2>Integers are trouble</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">is.integer</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">is.integer</span>(<span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a><span class="fu">expect_identical</span>(<span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>L), <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb49-2"><a></a><span class="fu">expect_equal</span>(<span class="fu">incrementer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section>
<section id="testing-lingo" class="title-slide slide level1 center">
<h1>Testing lingo</h1>

</section>
<section id="unit-testing" class="slide level2">
<h2>Unit testing</h2>
<ul>
<li><p>A <strong>unit</strong> is a small bit of code (function, class, module, group of classes)</p></li>
<li><p>A <strong>test</strong> calls the unit with a set of inputs, and checks if we get the expected output.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a>gcd <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb50-2"><a></a>  <span class="cf">if</span> (na.rm) x <span class="ot">&lt;-</span> x[<span class="sc">!</span><span class="fu">is.na</span>(x)]</span>
<span id="cb50-3"><a></a>  <span class="cf">if</span> (<span class="fu">anyNA</span>(x)) <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb50-4"><a></a>  <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb50-5"><a></a>  <span class="cf">if</span> (<span class="sc">!</span>rlang<span class="sc">::</span><span class="fu">is_integerish</span>(x)) <span class="fu">cli_abort</span>(<span class="st">"`x` must contain only integers."</span>)</span>
<span id="cb50-6"><a></a>  <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">==</span> <span class="dv">1</span>L) <span class="fu">return</span>(<span class="fu">as.integer</span>(x))</span>
<span id="cb50-7"><a></a>  x <span class="ot">&lt;-</span> x[x <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb50-8"><a></a>  <span class="fu">compute_gcd</span>(x) <span class="co"># dispatch to a C++ function</span></span>
<span id="cb50-9"><a></a>}</span>
<span id="cb50-10"><a></a></span>
<span id="cb50-11"><a></a><span class="fu">test_that</span>(<span class="st">"gcd works"</span>, {</span>
<span id="cb50-12"><a></a>  <span class="co"># corner cases</span></span>
<span id="cb50-13"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">gcd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>)), <span class="cn">NA</span>)</span>
<span id="cb50-14"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">gcd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>), <span class="cn">TRUE</span>), <span class="dv">1</span>L)</span>
<span id="cb50-15"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">gcd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)), <span class="dv">1</span>L)</span>
<span id="cb50-16"><a></a>  <span class="co"># error</span></span>
<span id="cb50-17"><a></a>  <span class="fu">expect_error</span>(<span class="fu">gcd</span>(<span class="fl">1.3</span>))</span>
<span id="cb50-18"><a></a>  <span class="co"># function</span></span>
<span id="cb50-19"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">gcd</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)), <span class="dv">2</span>L)</span>
<span id="cb50-20"><a></a>  <span class="fu">expect_identical</span>(<span class="fu">gcd</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>)), <span class="dv">1</span>L)</span>
<span id="cb50-21"><a></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="unit-testing-1" class="slide level2">
<h2>Unit testing</h2>
<p>Unit testing consists of writing tests that are</p>
<ul>
<li>focused on a small, low-level piece of code (a unit)</li>
<li>typically written by the programmer with standard tools</li>
<li>fast to run (so can be run often, i.e.&nbsp;before every commit).</li>
</ul>
</section>
<section id="unit-testing-benefits" class="slide level2">
<h2>Unit testing benefits</h2>
<p>Among others:</p>
<ul>
<li>Exposing problems early</li>
<li>Making it easy to change (refactor) code without forgetting pieces or breaking things</li>
<li>Simplifying integration of components</li>
<li>Providing natural documentation of what the code should do</li>
<li>Driving the design of new code.</li>
</ul>

<img data-src="http://www.phdcomics.com/comics/archive/phd033114s.gif" class="r-stretch"></section>
<section id="components-of-a-unit-testing-framework" class="slide level2">
<h2>Components of a Unit Testing Framework</h2>
<div class="flex">
<div class="w-70">
<ul>
<li>Collection of <strong>Assertions</strong> executed in sequence.</li>
<li>Executed in a self-contained environment.</li>
<li>Any assertion fails <svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#e98a15;overflow:visible;position:relative;"><path d="M334.5 414c8.8 3.8 19 2 26-4.6l144-136c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22l0 72L32 192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l288 0 0 72c0 9.6 5.7 18.2 14.5 22z"></path></svg> Test fails.</li>
</ul>
<p>Each test focuses on a single component.</p>
<p>Named so that you know what it‚Äôs doing.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a><span class="do">## See https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life</span></span>
<span id="cb51-2"><a></a><span class="fu">test_that</span>(<span class="st">"Conway's rules are correct"</span>, {</span>
<span id="cb51-3"><a></a>    <span class="co"># conway_rules(num_neighbors, alive?)</span></span>
<span id="cb51-4"><a></a>    <span class="fu">expect_true</span>(<span class="fu">conway_rules</span>(<span class="dv">3</span>, <span class="cn">FALSE</span>))</span>
<span id="cb51-5"><a></a>    <span class="fu">expect_false</span>(<span class="fu">conway_rules</span>(<span class="dv">4</span>, <span class="cn">FALSE</span>))</span>
<span id="cb51-6"><a></a>    <span class="fu">expect_true</span>(<span class="fu">conway_rules</span>(<span class="dv">2</span>, <span class="cn">TRUE</span>))</span>
<span id="cb51-7"><a></a>    ...</span>
<span id="cb51-8"><a></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="w-30">
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Gospers_glider_gun.gif"></p>
</div>
</div>
</section>
<section id="a-test-suite" class="slide level2">
<h2>A test suite</h2>
<div class="flex">
<div class="w-50">
<ul>
<li><p>Collection of related tests in a common context.</p></li>
<li><p>Prepares the environment, cleans up after</p></li>
<li><p>(loads some data, connects to database, necessary library,‚Ä¶)</p></li>
<li><p>Test suites are run and the results reported, particularly failures, in a easy to parse and economical style.</p></li>
<li><p>For example, Python‚Äôs <code>{unittest}</code> can report like this</p></li>
</ul>
</div>
<div class="w-50">
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a></a><span class="ex">$</span> python test/trees_test.py <span class="at">-v</span></span>
<span id="cb52-2"><a></a></span>
<span id="cb52-3"><a></a><span class="ex">test_crime_counts</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-4"><a></a><span class="ex">Ensure</span> Ks are consistent with num_points. ... ok</span>
<span id="cb52-5"><a></a><span class="ex">test_indices_sorted</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-6"><a></a><span class="ex">Ensure</span> all node indices are sorted in increasing order. ... ok</span>
<span id="cb52-7"><a></a><span class="ex">test_no_bbox_overlap</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-8"><a></a><span class="ex">Check</span> that child bounding boxes do not overlap. ... ok</span>
<span id="cb52-9"><a></a><span class="ex">test_node_counts</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-10"><a></a><span class="ex">Ensure</span> that each node<span class="st">'s point count is accurate. ... ok</span></span>
<span id="cb52-11"><a></a><span class="st">test_oversized_leaf (__main__.DataTreeTest)</span></span>
<span id="cb52-12"><a></a><span class="st">Don'</span>t recurse infinitely on duplicate points. ... ok</span>
<span id="cb52-13"><a></a><span class="ex">test_split_parity</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-14"><a></a><span class="ex">Check</span> that each tree level has the right split axis. ... ok</span>
<span id="cb52-15"><a></a><span class="ex">test_trange_contained</span> <span class="er">(</span><span class="ex">__main__.DataTreeTest</span><span class="kw">)</span></span>
<span id="cb52-16"><a></a><span class="ex">Check</span> that child tranges are contained in parent tranges. ... ok</span>
<span id="cb52-17"><a></a><span class="ex">test_no_bbox_overlap</span> <span class="er">(</span><span class="ex">__main__.QueryTreeTest</span><span class="kw">)</span></span>
<span id="cb52-18"><a></a><span class="ex">Check</span> that child bounding boxes do not overlap. ... ok</span>
<span id="cb52-19"><a></a><span class="ex">test_node_counts</span> <span class="er">(</span><span class="ex">__main__.QueryTreeTest</span><span class="kw">)</span></span>
<span id="cb52-20"><a></a><span class="ex">Ensure</span> that each node<span class="st">'s point count is accurate. ... ok</span></span>
<span id="cb52-21"><a></a><span class="st">test_oversized_leaf (__main__.QueryTreeTest)</span></span>
<span id="cb52-22"><a></a><span class="st">Don'</span>t recurse infinitely on duplicate points. ... ok</span>
<span id="cb52-23"><a></a><span class="ex">test_split_parity</span> <span class="er">(</span><span class="ex">__main__.QueryTreeTest</span><span class="kw">)</span></span>
<span id="cb52-24"><a></a><span class="ex">Check</span> that each tree level has the right split axis. ... ok</span>
<span id="cb52-25"><a></a><span class="ex">test_trange_contained</span> <span class="er">(</span><span class="ex">__main__.QueryTreeTest</span><span class="kw">)</span></span>
<span id="cb52-26"><a></a><span class="ex">Check</span> that child tranges are contained in parent tranges. ... ok</span>
<span id="cb52-27"><a></a></span>
<span id="cb52-28"><a></a><span class="ex">---------------------------------------------------------</span></span>
<span id="cb52-29"><a></a><span class="ex">Ran</span> 12 tests in 23.932s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="r-example" class="slide level2">
<h2><code>R</code> example</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>testthat<span class="sc">::</span><span class="fu">test_local</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"../../../../../../Delphi/smoothqr/"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>‚úî | F W  S  OK | Context

‚†è |          0 | smooth-rq                                                      
‚†¥ |          6 | smooth-rq                                                      
‚úî |         12 | smooth-rq

‚ïê‚ïê Results ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 12 ]</code></pre>
</div>
</div>
</section>
<section id="what-do-i-test" class="slide level2">
<h2>What do I test?</h2>
<div class="callout callout-tip no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Core Principle:</strong></p>
</div>
<div class="callout-content">
<p>Tests should be passed by a correct function, but not by an incorrect function.</p>
</div>
</div>
</div>
<p>The tests must apply pressure to know if things break.</p>
<ul>
<li>several specific inputs for which you <em>know</em> the correct answer</li>
<li>‚Äúedge‚Äù cases, like a list of size zero or a matrix instead of a vector</li>
<li>special cases that the function must handle, but which you might forget about months from now</li>
<li>error cases that should throw an error instead of returning an invalid answer</li>
<li>previous bugs you‚Äôve fixed, so those bugs never return.</li>
</ul>
</section>
<section id="what-do-i-test-1" class="slide level2">
<h2>What do I test?</h2>
<p>Make sure that incorrect functions won‚Äôt pass (or at least, won‚Äôt pass them all).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>add <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) <span class="fu">return</span>(<span class="dv">4</span>)</span>
<span id="cb55-2"><a></a>add <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) <span class="fu">return</span>(a <span class="sc">*</span> b)</span>
<span id="cb55-3"><a></a></span>
<span id="cb55-4"><a></a><span class="fu">test_that</span>(<span class="st">"Addition is commutative"</span>, {</span>
<span id="cb55-5"><a></a>  <span class="fu">expect_equal</span>(<span class="fu">add</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">add</span>(<span class="dv">3</span>, <span class="dv">1</span>)) <span class="co"># both pass this !!</span></span>
<span id="cb55-6"><a></a>  <span class="fu">expect_equal</span>(<span class="fu">add</span>(<span class="dv">2</span>, <span class="dv">5</span>), <span class="fu">add</span>(<span class="dv">5</span>, <span class="dv">2</span>)) <span class="co"># neither passes this</span></span>
<span id="cb55-7"><a></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p>Cover all branches.</p></li>
<li><p>Make sure there aren‚Äôt branches you don‚Äôt expect.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="assertions" class="slide level2">
<h2>Assertions</h2>
<p><span class="secondary">Assertions</span> are things that must be true. Failure means ‚ÄúQuit‚Äù.</p>
<ul>
<li>There‚Äôs no way to recover.</li>
<li>Think: passed in bad arguments.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a></a><span class="kw">def</span> fit(data, ...):</span>
<span id="cb56-2"><a></a></span>
<span id="cb56-3"><a></a>    <span class="cf">for</span> it <span class="kw">in</span> <span class="bu">range</span>(max_iterations):</span>
<span id="cb56-4"><a></a>        <span class="co"># iterative fitting code here</span></span>
<span id="cb56-5"><a></a>        ...</span>
<span id="cb56-6"><a></a></span>
<span id="cb56-7"><a></a>        <span class="co"># Plausibility check</span></span>
<span id="cb56-8"><a></a>        <span class="cf">assert</span> np.<span class="bu">all</span>(alpha <span class="op">&gt;=</span> <span class="dv">0</span>), <span class="st">"negative alpha"</span></span>
<span id="cb56-9"><a></a>        <span class="cf">assert</span> np.<span class="bu">all</span>(theta <span class="op">&gt;=</span> <span class="dv">0</span>), <span class="st">"negative theta"</span></span>
<span id="cb56-10"><a></a>        <span class="cf">assert</span> omega <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">"Nonpositive omega"</span></span>
<span id="cb56-11"><a></a>        <span class="cf">assert</span> eta2 <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">"Nonpositive eta2"</span></span>
<span id="cb56-12"><a></a>        <span class="cf">assert</span> sigma2 <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">"Nonpositive sigma2"</span></span>
<span id="cb56-13"><a></a></span>
<span id="cb56-14"><a></a>    ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The parameters have to be positive. Negative is impossible. No way to recover.</p>
</section>
<section id="errors" class="slide level2">
<h2>Errors</h2>
<p><span class="secondary">Errors</span> are for unexpected conditions that <em>could</em> be handled by the calling code.</p>
<ul>
<li>You could perform some action to work around the error, fix it, or report it to the user.</li>
</ul>
<h4 id="example">Example:</h4>
<ul>
<li>I give you directions to my house. You get lost. You could recover.</li>
<li>Maybe retrace your steps, see if you missed a sign post.</li>
<li>Maybe search on Google Maps to locate your self in relation to a landmark.</li>
<li>If those fail, message me.</li>
<li>If I don‚Äôt respond, get an Uber.</li>
<li>Finally, give up and go home.</li>
</ul>
</section>
<section id="errors-1" class="slide level2">
<h2>Errors</h2>
<p>Code can also do this. It can <code>try</code> the function and <code>catch</code> errors to recover automatically.</p>
<p>For example:</p>
<ul>
<li><p>Load some data from the internet. If the file doesn‚Äôt exist, create some.</p></li>
<li><p>Run some iterative algorithm. If we haven‚Äôt converged, restart from another place.</p></li>
</ul>
<p>Code can fix errors without user input. It can‚Äôt fix assertions.</p>
<ul>
<li>An input must be an integer. So round it, Warn, and proceed. Rather than fail.</li>
</ul>
</section>
<section id="test-driven-development" class="slide level2">
<h2>Test-driven development</h2>
<p>Test Driven Development (TDD) uses a short development cycle for each new feature or component:</p>
<ol type="1">
<li><p>Write tests that specify the component‚Äôs desired behavior.<br>
The tests will initially fail because the component does not yet exist.</p></li>
<li><p>Create the minimal implementation that passes the test.</p></li>
<li><p>Refactor the code to meet design standards, running the tests with each change to ensure correctness.</p></li>
</ol>
</section>
<section id="why-work-this-way" class="slide level2">
<h2>Why work this way?</h2>
<ul>
<li><p>Writing the tests may help you realize</p>
<ol type="a">
<li>what arguments the function must take,<br>
</li>
<li>what other data it needs,<br>
</li>
<li>and what kinds of errors it needs to handle.</li>
</ol></li>
<li><p>The tests define a specific plan for what the function must do.</p></li>
<li><p>You will catch bugs at the beginning instead of at the end (or never).</p></li>
<li><p>Testing is part of design, instead of a lame afterthought you dread doing.</p></li>
</ul>
</section>
<section id="rules-of-thumb" class="slide level2">
<h2>Rules of thumb</h2>
<dl>
<dt>Keep tests in separate files</dt>
<dd>
from the code they test. This makes it easy to run them separately.
</dd>
<dt>Give tests names</dt>
<dd>
Testing frameworks usually let you give the test functions names or descriptions. <code>test_1</code> doesn‚Äôt help you at all, but <code>test_tree_insert</code> makes it easy for you to remember what the test is for.
</dd>
<dt>Make tests replicable</dt>
<dd>
If a test involves random data, what do you do when the test fails? You need some way to know what random values it used so you can figure out why the test fails.
</dd>
</dl>
</section>
<section id="rules-of-thumb-1" class="slide level2">
<h2>Rules of thumb</h2>
<dl>
<dt>Use tests instead of the REPL</dt>
<dd>
If you‚Äôre building a complicated function, write the tests in advance and use them to help you while you write the function. You‚Äôll waste time calling over and over at the REPL.
</dd>
<dt>Avoid testing against another‚Äôs code/package</dt>
<dd>
You don‚Äôt know the ins and outs of what they do. If they change the code, your tests will fail.
</dd>
<dt>Test Units, not main functions</dt>
<dd>
You should write small functions that do one thing. Test those. Don‚Äôt write one huge 1000-line function and try to test that.
</dd>
<dt>Avoid random numbers</dt>
<dd>
Seeds are not always portable.
</dd>
</dl>
</section>
<section class="slide level2">

<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p><code>R</code>, use <code>{testthat}</code>. See the <a href="http://r-pkgs.had.co.nz/tests.html">Testing</a> chapter from Hadley Wickham‚Äôs R Packages book.</p></li>
<li><p><code>python</code> use <code>{pytest}</code>. A bit more user-friendly than <code>{unittest}</code>: <a href="https://docs.pytest.org/en/latest/">pytest</a></p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="other-suggestions" class="slide level2">
<h2>Other suggestions</h2>
<div class="flex">
<div class="w-50">
<p><span class="secondary">Do this</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb57-2"><a></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">stop</span>(x, <span class="st">" is not positive"</span>)</span>
<span id="cb57-3"><a></a>}</span>
<span id="cb57-4"><a></a></span>
<span id="cb57-5"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb57-6"><a></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">message</span>(x, <span class="st">" is not positive"</span>)</span>
<span id="cb57-7"><a></a>  <span class="co"># not useful unless we fix it too...</span></span>
<span id="cb57-8"><a></a>}</span>
<span id="cb57-9"><a></a></span>
<span id="cb57-10"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb57-11"><a></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">warning</span>(x, <span class="st">" is not positive"</span>)</span>
<span id="cb57-12"><a></a>  <span class="co"># not useful unless we fix it too...</span></span>
<span id="cb57-13"><a></a>}</span>
<span id="cb57-14"><a></a></span>
<span id="cb57-15"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb57-16"><a></a>  <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb57-17"><a></a>    rlang<span class="sc">::</span><span class="fu">abort</span>(<span class="st">"no data"</span>, <span class="at">class=</span><span class="st">"no_input_data"</span>)</span>
<span id="cb57-18"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These allow error handling.</p>
</div>
<div class="w-50">
<p><span class="secondary">Don‚Äôt do this</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb58-2"><a></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb58-3"><a></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(x, <span class="st">" is not positive"</span>))</span>
<span id="cb58-4"><a></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb58-5"><a></a>  }</span>
<span id="cb58-6"><a></a>  ...</span>
<span id="cb58-7"><a></a>}</span>
<span id="cb58-8"><a></a></span>
<span id="cb58-9"><a></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb58-10"><a></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">cat</span>(<span class="st">"uh oh."</span>)</span>
<span id="cb58-11"><a></a>  ...</span>
<span id="cb58-12"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Can‚Äôt recover.</p>
<p>Don‚Äôt know what went wrong.</p>
</div>
</div>
</section>
<section class="slide level2">

<p>See <a href="https://36-750.github.io/practices/errors-exceptions/">here</a> for more details.</p>
<p>Seems like overkill,</p>
<p>but when you run a big simulation that takes 2 weeks,</p>
<p>you don‚Äôt want it to die after 10 days.</p>
<p>You want it to recover.</p>
</section></section>
<section>
<section id="more-coding-details-if-time." class="title-slide slide level1 center">
<h1>More coding details, if time.</h1>

</section>
<section id="classes" class="slide level2">
<h2>Classes</h2>
<div class="flex">
<div class="w-50">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb59-2"><a></a>  <span class="at">x1 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>), </span>
<span id="cb59-3"><a></a>  <span class="at">x2 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>), </span>
<span id="cb59-4"><a></a>  <span class="at">y =</span> x1 <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> x2 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb59-5"><a></a>)</span>
<span id="cb59-6"><a></a>mdl <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., <span class="at">data =</span> tib)</span>
<span id="cb59-7"><a></a><span class="fu">class</span>(tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a><span class="fu">class</span>(mdl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lm"</code></pre>
</div>
</div>
<p>The class allows for the use of ‚Äúmethods‚Äù</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a><span class="fu">print</span>(mdl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ ., data = tib)

Coefficients:
(Intercept)           x1           x2  
     0.1216       1.0803       2.1038  </code></pre>
</div>
</div>
</div>
<div class="w-50">
<ul>
<li><p><code>R</code> ‚Äúknows what to do‚Äù when you <code>print()</code> an object of class <code>"lm"</code>.</p></li>
<li><p><code>print()</code> is called a ‚Äúgeneric‚Äù function.</p></li>
<li><p>You can create ‚Äúmethods‚Äù that get dispatched.</p></li>
<li><p>For any generic, <code>R</code> looks for a method for the class.</p></li>
<li><p>If available, it calls that function.</p></li>
</ul>
</div>
</div>
</section>
<section id="viewing-the-dispatch-chain" class="slide level2">
<h2>Viewing the dispatch chain</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>sloop<span class="sc">::</span><span class="fu">s3_dispatch</span>(<span class="fu">print</span>(incrementer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=&gt; print.function
 * print.default</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>sloop<span class="sc">::</span><span class="fu">s3_dispatch</span>(<span class="fu">print</span>(tib))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   print.tbl_df
=&gt; print.tbl
 * print.data.frame
 * print.default</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a>sloop<span class="sc">::</span><span class="fu">s3_dispatch</span>(<span class="fu">print</span>(mdl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=&gt; print.lm
 * print.default</code></pre>
</div>
</div>
</section>
<section id="r-geeky-but-important" class="slide level2">
<h2>R-Geeky But Important</h2>
<p>There are <span class="secondary">lots</span> of generic functions in <code>R</code></p>
<p>Common ones are <code>print()</code>, <code>summary()</code>, and <code>plot()</code>.</p>
<p>Also, lots of important statistical modelling concepts: <code>residuals()</code> <code>coef()</code></p>
<p>(In <code>python</code>, these work the opposite way: <code>obj.residuals</code>. The dot after the object accesses methods defined for that type of object. But the dispatch behaviour is less robust.)</p>
<ul>
<li><p>The convention is that the specialized function is named <code>method.class()</code>, e.g., <code>summary.lm()</code>.</p></li>
<li><p>If no specialized function is defined, R will try to use <code>method.default()</code>.</p></li>
</ul>
<p>For this reason, <code>R</code> programmers try to avoid <code>.</code> in names of functions or objects.</p>
</section>
<section id="annoying-example" class="slide level2">
<h2>Annoying example</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a><span class="fu">print</span>(mdl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ ., data = tib)

Coefficients:
(Intercept)           x1           x2  
     0.1216       1.0803       2.1038  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a></a>print.lm <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) <span class="fu">print</span>(<span class="st">"This is an linear model."</span>)</span>
<span id="cb73-2"><a></a><span class="fu">print</span>(mdl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is an linear model."</code></pre>
</div>
</div>
<ul>
<li>Overwrote the method in the global environment.</li>
</ul>
</section>
<section id="wherefore-methods" class="slide level2">
<h2>Wherefore methods?</h2>
<ul>
<li><p>The advantage is that you don‚Äôt have to learn a totally new syntax to grab residuals or plot things</p></li>
<li><p>You just use <code>residuals(mdl)</code> whether <code>mdl</code> has class <code>lm</code> could have been done two centuries ago, or a Batrachian Emphasis Machine which won‚Äôt be invented for another five years.</p></li>
<li><p>The one draw-back is the help pages for the generic methods tend to be pretty vague</p></li>
<li><p>Compare <code>?summary</code> with <code>?summary.lm</code>.</p></li>
</ul>
</section>
<section id="different-environments" class="slide level2">
<h2>Different environments</h2>
<ul>
<li><p>These are often tricky, but are very common.</p></li>
<li><p>Most programming languages have this concept in one way or another.</p></li>
<li><p>In <code>R</code> code run in the Console produces objects in the ‚ÄúGlobal environment‚Äù</p></li>
<li><p>You can see what you create in the ‚ÄúEnvironment‚Äù tab.</p></li>
<li><p>But there‚Äôs lots of other stuff.</p></li>
<li><p>Many packages are automatically loaded at startup, so you have access to the functions and data inside those package Environments.</p></li>
</ul>
<p>For example <code>mean()</code>, <code>lm()</code>, <code>plot()</code>, <code>iris</code> (technically <code>iris</code> is lazy-loaded, meaning it‚Äôs not in memory until you call it, but it is available)</p>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<ul>
<li><p>Other packages require you to load them with <code>library(pkg)</code> before their functions are available.</p></li>
<li><p>But, you can call those functions by prefixing the package name <code>ggplot2::ggplot()</code>.</p></li>
<li><p>You can also access functions that the package developer didn‚Äôt ‚Äúexport‚Äù for use with <code>:::</code> like <code>dplyr:::as_across_fn_call()</code></p></li>
</ul>
<aside class="notes">
<p>That is all about accessing ‚Äúobjects in package environments‚Äù</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="other-issues-with-environments" class="slide level2">
<h2>Other issues with environments</h2>
<p>As one might expect, functions create an environment inside the function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a></a>z <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb75-2"><a></a>fun <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb75-3"><a></a>  z <span class="ot">&lt;-</span> x</span>
<span id="cb75-4"><a></a>  <span class="fu">print</span>(z)</span>
<span id="cb75-5"><a></a>  <span class="fu">invisible</span>(z)</span>
<span id="cb75-6"><a></a>}</span>
<span id="cb75-7"><a></a><span class="fu">fun</span>(<span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
</div>
<p>Non-trivial cases are <code>data-masking</code> environments.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a></a>tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x1 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),  <span class="at">x2 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),  <span class="at">y =</span> x1 <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> x2)</span>
<span id="cb77-2"><a></a>mdl <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> tib)</span>
<span id="cb77-3"><a></a>x2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'x2' not found</code></pre>
</div>
</div>
<ul>
<li><code>lm()</code> looks ‚Äúinside‚Äù the <code>tib</code> to find <code>y</code> and <code>x2</code></li>
<li>The data variables are added to the <code>lm()</code> environment</li>
</ul>
</section>
<section id="other-issues-with-environments-1" class="slide level2">
<h2>Other issues with environments</h2>
<p><span class="fourth-colour">When Knit, <code>.Rmd</code> files run in their OWN environment.</span></p>
<p>They are run from top to bottom, with code chunks depending on previous</p>
<p>This makes them reproducible.</p>
<p>Jupyter notebooks don‚Äôt do this. üò±</p>
<p>Objects in your local environment are not available in the <code>.Rmd</code></p>
<p>Objects in the <code>.Rmd</code> are not available locally.</p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The most frequent error I see is:</p>
<ul>
<li>running chunks individually, 1-by-1, and it works</li>
<li>Knitting, and it fails</li>
</ul>
<p>The reason is almost always that the chunks refer to objects in the Global Environment that don‚Äôt exist in the <code>.Rmd</code></p>
</div>
</div>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<h3 id="this-error-also-happens-because">This error also happens because:</h3>
<ul>
<li><code>library()</code> calls were made globally but not in the <code>.Rmd</code>
<ul>
<li>so the packages aren‚Äôt loaded</li>
</ul></li>
<li>paths to data or other objects are not relative to the <code>.Rmd</code> in your file system
<ul>
<li>they must be</li>
</ul></li>
<li>Careful organization and relative paths will help to avoid some of these.</li>
</ul>
</section></section>
<section>
<section id="debugging" class="title-slide slide level1 center">
<h1>Debugging</h1>

</section>
<section id="how-to-fix-code" class="slide level2">
<h2>How to fix code</h2>
<ul>
<li>If you‚Äôre using a function in a package, start with <code>?function</code> to see the help
<ul>
<li>Make sure you‚Äôre calling the function correctly.</li>
<li>Try running the examples.</li>
<li>paste the error into Google (this is my first step when you ask me)</li>
<li>Go to the package website if it exists, and browse around</li>
</ul></li>
<li>If your <code>.Rmd</code> won‚Äôt Knit
<ul>
<li>Did you make the mistake on the last slide?</li>
<li>Did it Knit before? Then the bug is in whatever you added.</li>
<li>Did you never Knit it? Why not?</li>
<li>Call <code>rstudioapi::restartSession()</code>, then run the Chunks 1-by-1</li>
</ul></li>
</ul>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<p>Adding <code>browser()</code></p>
<ul>
<li>Only useful with your own functions.</li>
<li>Open the script with the function, and add <code>browser()</code> to the code somewhere</li>
<li>Then call your function.</li>
<li>The execution will Stop where you added <code>browser()</code> and you‚Äôll have access to the local environment to play around</li>
</ul>
</section>
<section id="reproducible-examples" class="slide level2">
<h2>Reproducible examples</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Question I get uncountably often that I hate:</strong></p>
</div>
<div class="callout-content">
<p>‚ÄúI ran the code like you had on Slide 39, but it didn‚Äôt work.‚Äù</p>
</div>
</div>
</div>
<ul>
<li>If you want to ask me why the code doesn‚Äôt work, you need to show me what‚Äôs wrong.</li>
</ul>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Don‚Äôt just share a screenshot!</strong></p>
</div>
<div class="callout-content">
<p>Unless you get lucky, I won‚Äôt be able to figure it out from that.</p>
<p>And I can‚Äôt copy-paste into Google.</p>
</div>
</div>
</div>
<p>What you need is a Reproducible Example or <code>reprex</code>. This is a small chunk of code that</p>
<ol type="1">
<li>runs in it‚Äôs own environment</li>
<li>and produces the error.</li>
</ol>
</section></section>
<section>
<section id="section-4" class="title-slide slide level1 center">
<h1></h1>
<p>The best way to do this is with the <code>{reprex}</code> package.</p>
</section>
<section id="reproducible-examples-how-it-works" class="slide level2 smaller">
<h2>Reproducible examples, How it works</h2>
<ol type="1">
<li><p>Open a new <code>.R</code> script.</p></li>
<li><p>Paste your buggy code in the file (no need to save)</p></li>
<li><p>Edit your code to make sure it‚Äôs ‚Äúenough to produce the error‚Äù and nothing more. (By rerunning the code a few times.)</p></li>
<li><p>Copy your code.</p></li>
<li><p>Call <code>reprex::reprex()</code> from the console. This will run your code in a new environment and show the result in the Viewer tab. Does it create the error you expect?</p></li>
<li><p>If it creates other errors, that may be the problem. You may fix the bug on your own!</p></li>
<li><p>If it doesn‚Äôt have errors, then your global environment is Farblunget.</p></li>
<li><p>The Output is now on your clipboard. Share that.</p></li>
</ol>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Because Reprex runs in it‚Äôs own environment, it doesn‚Äôt have access to any of the libraries you loaded or the stuff in your global environment. You‚Äôll have to load these things in the script. That‚Äôs the point</p>
</div>
</div>
</div>
</section>
<section id="practice" class="slide level2">
<h2>Practice</h2>
<h4 id="gradient-ascent.">Gradient ascent.</h4>
<ul>
<li><p>Suppose we want to find <span class="math inline">\(\max_x f(x)\)</span>.</p></li>
<li><p>We repeat the update <span class="math inline">\(x \leftarrow x + \gamma f'(x)\)</span> until convergence, for some <span class="math inline">\(\gamma &gt; 0\)</span>.</p></li>
</ul>
<h4 id="poisson-likelihood.">Poisson likelihood.</h4>
<ul>
<li>Recall the likelihood: <span class="math inline">\(L(\lambda; y_1,\ldots,y_n) = \prod_{i=1}^n \frac{\lambda^{y_i} \exp(-\lambda)}{y_i!}I(y_i \in 0,1,\ldots)\)</span></li>
</ul>
<p><span class="secondary">Goal:</span> find the MLE for <span class="math inline">\(\lambda\)</span> using gradient ascent</p>
</section>
<section id="deliverables-2-r-scripts" class="slide level2">
<h2>Deliverables, 2 R scripts</h2>
<ol type="1">
<li>A function that evaluates the log likelihood. (think about sufficiency, ignorable constants)</li>
<li>A function that evaluates the gradient of the log likelihood.</li>
<li>A function that <em>does</em> the optimization.
<ol type="a">
<li>Should take in data, the log likelihood and the gradient.</li>
<li>Use the loglikelihood to determine convergence.</li>
<li>Pass in any other necessary parameters with reasonable defaults.</li>
</ol></li>
<li>A collection of tests that make sure your functions work.</li>
</ol>
<p><span class="math display">\[
\begin{aligned}
L(\lambda; y_1,\ldots,y_n) &amp;= \prod_{i=1}^n \frac{\lambda^{y_i} \exp(-\lambda)}{y_i!}I(y_i \in 0,1,\ldots)\\
x &amp;\leftarrow x + \gamma f'(x)
\end{aligned}
\]</span></p>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>UBC Stat 550 - 2024</p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/UBC-STAT\.github\.io\/stat-550\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // target, if specified
              link.setAttribute("target", "_blank");
              if (link.getAttribute("rel") === null) {
                link.setAttribute("rel", "noopener");
              }
              // default icon
              link.classList.add("external");
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>